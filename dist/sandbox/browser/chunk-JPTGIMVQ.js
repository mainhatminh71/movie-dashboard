import{u as o}from"./chunk-JVTXPZDR.js";import{W as a,aa as n,tc as h,ya as t}from"./chunk-RVWI2C5K.js";var S=(()=>{class s{constructor(){this.storageService=n(o),this.discoveredTVShowsSignal=t([]),this.genresSignal=t([]),this.loadingSignal=t(!1),this.errorSignal=t(null),this.searchQuery=t(""),this.selectedGenreIds=t([]),this.selectedYear=t(null),this.minRating=t(0),this.currentTVShowId=t(null),this.currentName=t(""),this.posterPath=t(null),this.backdropPath=t(null),this.overview=t(""),this.firstAirDate=t(null),this.voteAverage=t(0),this.genreIds=t([]),this.discoveredTVShows=this.discoveredTVShowsSignal.asReadonly(),this.genres=this.genresSignal.asReadonly(),this.loading=this.loadingSignal.asReadonly(),this.error=this.errorSignal.asReadonly(),this.filteredTVShows=h(()=>{let e=this.discoveredTVShowsSignal(),i=this.searchQuery().toLowerCase().trim();return i&&(e=e.filter(r=>r.name.toLowerCase().includes(i))),this.minRating()>0&&(e=e.filter(r=>(r.vote_average||0)>=this.minRating())),e}),this.hasActiveFilters=h(()=>!!this.searchQuery()||this.selectedGenreIds().length>0||!!this.selectedYear()||this.minRating()>0),this.watchList=this.storageService.watchList,this.watchListCount=this.storageService.count}setDiscoveredTVShows(e){this.discoveredTVShowsSignal.set(e)}setGenres(e){this.genresSignal.set(e)}setLoading(e){this.loadingSignal.set(e)}setError(e){this.errorSignal.set(e)}clearFilters(){this.searchQuery.set(""),this.selectedGenreIds.set([]),this.selectedYear.set(null),this.minRating.set(0)}isInWatchlist(e){return this.storageService.checkTVShowById(e)}toggleWatchlist(e){this.storageService.checkTVShowById(e.id)?this.storageService.removeTVShow(e):this.storageService.addTVShow(e)}static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275prov=a({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();export{S as a};

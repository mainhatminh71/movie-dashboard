import{u as o}from"./chunk-JVTXPZDR.js";import{W as a,aa as l,tc as n,ya as t}from"./chunk-RVWI2C5K.js";var u=(()=>{class i{constructor(){this.storageService=l(o),this.discoveredMoviesSignal=t([]),this.genresSignal=t([]),this.loadingSignal=t(!1),this.errorSignal=t(null),this.searchQuery=t(""),this.selectedGenreIds=t([]),this.selectedYear=t(null),this.minRating=t(0),this.currentMovieId=t(null),this.currentTitle=t(null),this.currentPoster=t(null),this.currentBackdrop=t(null),this.currentOverview=t(null),this.currentReleaseDate=t(null),this.voteAverage=t(null),this.currentGenreId=t(null),this.currentPopularMovies=t(null),this.discoveredMovies=this.discoveredMoviesSignal.asReadonly(),this.genres=this.genresSignal.asReadonly(),this.loading=this.loadingSignal.asReadonly(),this.error=this.errorSignal.asReadonly(),this.filteredMovies=n(()=>{let e=this.discoveredMoviesSignal(),s=this.searchQuery().toLowerCase().trim();return s&&(e=e.filter(r=>r.title.toLowerCase().trim().includes(s))),this.minRating()>0&&(e=e.filter(r=>(r.vote_average||0)>=this.minRating())),e}),this.hasActiveFilters=n(()=>!!this.searchQuery()||this.selectedGenreIds().length>0||!!this.selectedYear()||this.minRating()>0),this.watchList=this.storageService.watchList,this.watchListCount=this.storageService.count}setDiscoveredMovies(e){this.discoveredMoviesSignal.set(e)}setGenres(e){this.genresSignal.set(e)}setLoading(e){this.loadingSignal.set(e)}setError(e){this.errorSignal.set(e)}clearFilters(){this.searchQuery.set(""),this.selectedGenreIds.set([]),this.selectedYear.set(null),this.minRating.set(0)}isInWatchlist(e){return this.storageService.checkMovieById(e)}toggleWatchlist(e){this.storageService.checkMovieById(e.id)?this.storageService.removeMovie(e):this.storageService.addMovie(e)}static{this.\u0275fac=function(s){return new(s||i)}}static{this.\u0275prov=a({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();export{u as a};
